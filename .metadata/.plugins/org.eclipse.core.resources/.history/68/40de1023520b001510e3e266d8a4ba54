<%@ page contentType="text/html;charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<script type="text/javascript" src="<%=request.getContextPath() %>/script/jquery.js"></script>

<script type="text/javascript">
var boardList;

function getBoardList(){
	alert(boardList);
	return boardList;
}
<!--

//-->
$(document).ready(function(){
	
	$.ajax({
		url:"/taommall/board/selectBoardByProductId.do",
		type:"POST",
		data:{"productId":"${product.productId}"},
		dataType:"JSON",
		success:function(jdata){
			boardList = jdata;			
			$("#tbody").empty();
			for(var i = 0;i<jdata.length;i++){
				$("#tbody").append(
						$("<tr>").append($("<td>").text(i+1)).append($("</td>"))
						.append($("<td>").text(jdata[i].title)).append($("</td>"))
						.append($("<td>").text(jdata[i].buyerId)).append($("</td>")).append($("</tr>")))
						.append($("<div style='display:none'>")
						.append($("<tr>").append($("<td colspan='3'>").text(jdata[i].content)).append($("</td>")).append($("</tr>")))
						.append($("</div>")))
			}

		},
		error:function(a,b,c){
			alert(a+"-"+b+"-"+c);
		}
	});
	
	
	
	$("#registerBtn").on("click",function(){
		window.open("writeBoard.do","글쓰기",'width=500,height=500,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,left=150,top=100');
		
	});
	$("#tbody").on("mouseover","tr",function(){
		$("#tbody tr").css("background-color","white");
		$(this).css("background-color","#E2B4A9");
	});
	
	$("#tbody").on("click","tr",function(){
		$("#tbody").find("div").hide();
		$(this).find("+div").show();
		
	});
	
	
});

function registerBoard(title,content){
	location = "board/auth/insertBoard.do?title="+title+"&content="+content+"&productId=${product.productId}&buyerId=${sessionScope.loginInfo.buyerId}";
}

</script>
<style>

</style>
<div style="width:1000px;margin: 0 auto;">
			<table border='1'  style=" width:800px;margin: 0 auto">
					<thead>
						<tr>
							<td>No.</td>
							<td>제목</td>
							<td>작성자</td>
						</tr>
					</thead>
					<tbody id="tbody">
					</tbody>
				</table>
	<button id="registerBtn">글쓰기</button>
</div>